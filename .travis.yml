language: python

# Needed for Python 3.7
# https://github.com/travis-ci/travis-ci/issues/9815#issuecomment-401756442
dist: xenial
sudo: true

python:
  - "3.6"
  - "3.7"

cache: pip

install:
  - pip install -U pip && pip install -U setuptools pipenv
  - pipenv --bare install

script:
  - rm -rf dist && python setup.py sdist && pip install dist/*.tar.gz
  - pytest -vv
  - pylint --rcfile=pylintrc setup.py appsecrets
